<!DOCTYPE html>

<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <link rel="stylesheet" type="text/css"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <style>
    div.letter {
      border-radius: 50%;
      min-height: 1em;
      min-width: 1em;
      max-height: 8em;
      max-width: 8em;
      display: inline-block;
      margin: 1em;
      color: white;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    div.correct {
      background-color: rgb(135, 255, 55);
    }

    div.wrong {
      background-color: rgb(255, 102, 55);
    }

    div.confused {
      background-color: rgb(184, 159, 48);
    }

    div.skipped {
      background-color: rgb(98, 114, 88);
    }

    .report_category {
      text-align: center;
    }
  </style>



</head>

<body>
  <div class="container">
    <p style="text-align: center;">The bigger the circle the more you took time to answer</p>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 p-1" style="min-height: 5em;">

      <div class="col my-1" id="rightAnswers" style="border: 1px solid rgb(252, 136, 136);">No letters</div>
      <div class="col my-1" id="confusedAnswers" style="border: 1px solid rgb(252, 136, 136);">No letters</div>
      <div class="col my-1" id="skippedAnswers" style="border: 1px solid rgb(252, 136, 136);">No letters</div>
      <div class="col my-1" id="wrongAnswers" style="border: 1px solid rgb(252, 136, 136);">No letters</div>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    let data1 = [
      ['a', 'normal', 4000, ['a', 'b', 'c', 'd'], ['a']],
      ['b', 'normal', 11000, ['a', 'b', 'c', 'd'], ['c', 'd', 'd', 'b']],
      ['d', 'normal', 8900, ['a', 'b', 'c', 'd'], ['b']],
      ['c', 'normal', 4500, ['a', 'b', 'c', 'd'], ['c']]
    ];
    let data = [
      [
        "c",
        "normal",
        170000,
        [
          "a",
          "b",
          "c",
          "d"
        ],
        [
          "c"
        ]
      ],
      [
        "d",
        "normal",
        4000,
        [
          "a",
          "b",
          "c",
          "d"
        ],
        [
          "b",
          "d"
        ]
      ],
      [
        "b",
        "normal",
        15000,
        [
          "a",
          "b",
          "c",
          "d"
        ],
        [
          "b"
        ]
      ],
      [
        "a",
        "normal",
        1004,
        [
          "a",
          "b",
          "c",
          "d"
        ],
        [
          "a"
        ]
      ],
      [
        "g",
        "normal",
        2500,
        [
          "e",
          "f",
          "g"
        ],
        [
          "g"
        ]
      ],
      [
        "e",
        "normal",
        2000,
        [
          "e",
          "f",
          "g"
        ],
        [
          "e"
        ]
      ],
      [
        "f",
        "normal",
        1000,
        [
          "e",
          "f",
          "g"
        ],
        [
          "f"
        ]
      ],
      [
        "k",
        "normal",
        1001,
        [
          "h",
          "i",
          "j",
          "k"
        ],
        [
          "k"
        ]
      ],
      [
        "j",
        "normal",
        1501,
        [
          "h",
          "i",
          "j",
          "k"
        ],
        [
          "j"
        ]
      ],
      [
        "i",
        "normal",
        1001,
        [
          "h",
          "i",
          "j",
          "k"
        ],
        [
          "i"
        ]
      ],
      [
        "h",
        "normal",
        3000,
        [
          "h",
          "i",
          "j",
          "k"
        ],
        [
          "h"
        ]
      ],
      [
        "l",
        "normal",
        2000,
        [
          "l",
          "m",
          "n",
          "o",
          "p"
        ],
        [
          "l"
        ]
      ],
      [
        "p",
        "normal",
        1500,
        [
          "l",
          "m",
          "n",
          "o",
          "p"
        ],
        [
          "p"
        ]
      ],
      [
        "m",
        "normal",
        10002,
        [
          "l",
          "m",
          "n",
          "o",
          "p"
        ],
        [
          "m"
        ]
      ],
      [
        "o",
        "normal",
        2500,
        [
          "l",
          "m",
          "n",
          "o",
          "p"
        ],
        [
          "n",
          "o"
        ]
      ],
      [
        "n",
        "normal",
        1500,
        [
          "l",
          "m",
          "n",
          "o",
          "p"
        ],
        [
          "n"
        ]
      ],
      [
        "s",
        "normal",
        1500,
        [
          "q",
          "r",
          "s",
          "t"
        ],
        [
          "s"
        ]
      ],
      [
        "r",
        "normal",
        2500,
        [
          "q",
          "r",
          "s",
          "t"
        ],
        [
          "t",
          "r"
        ]
      ],
      [
        "t",
        "normal",
        1000,
        [
          "q",
          "r",
          "s",
          "t"
        ],
        [
          "t"
        ]
      ],
      [
        "q",
        "normal",
        2001,
        [
          "q",
          "r",
          "s",
          "t"
        ],
        []
      ],
      [
        "x",
        "normal",
        1500,
        [
          "u",
          "v",
          "w",
          "x",
          "y",
          "z"
        ],
        []
      ],
      [
        "w",
        "normal",
        1500,
        [
          "u",
          "v",
          "w",
          "x",
          "y",
          "z"
        ],
        []
      ],
      [
        "y",
        "normal",
        1500,
        [
          "u",
          "v",
          "w",
          "x",
          "y",
          "z"
        ],
        []
      ],
      [
        "u",
        "normal",
        1500,
        [
          "u",
          "v",
          "w",
          "x",
          "y",
          "z"
        ],
        []
      ],
      [
        "z",
        "normal",
        1500,
        [
          "u",
          "v",
          "w",
          "x",
          "y",
          "z"
        ],
        []
      ],
      [
        "v",
        "normal",
        1500,
        [
          "u",
          "v",
          "w",
          "x",
          "y",
          "z"
        ],
        []
      ],
      [
        "b",
        "cursive",
        3001,
        [
          "b",
          "h",
          "k",
          "l"
        ],
        [
          "b"
        ]
      ]
    ];
    let answerReport = [];

    function categoriseAnswer() {
      var tem, counter = 0;
      data.forEach((item) => {
        answerReport.push({
          letter: item[0],
          attempt: item[item.length - 1].length,
          skipped: item[0] != item[item.length - 1].at(-1),
          duration: item[2],
          confused: findConfused(item[0])
        });

      });
      console.log(answerReport);
    }

    function findConfused(l) {
      var confused = false;
      data.forEach((item) => {
        if (l != item[0])
          if (item.at(-1).find(a => a == l))
            confused = true;
      });
      return confused;
    }
    var scale = d3.scaleLinear()
      .domain([1000, 10000])
      .range([1, 6]);

    function createChart() {
      var rightAnswers = answerReport.filter(item => item.attempt == 1 && !item.skipped && !item.confused);
      d3.select('#rightAnswers')
        .html("<p class='report_category'>You identified these letters correctly</p>")
        .selectAll('div')
        .data(rightAnswers)
        .enter()
        .append('div')
        .attr('class', 'letter correct')
        .style('width', (d) => scale(d.duration) + 'em')
        .style('height', (d) => scale(d.duration) + 'em')
        .text(function (d) {
          return d.letter;
        });
      d3.select('#confusedAnswers')
        .html("<p class='report_category'>You have confused with these letters</p>")
        .selectAll('div')
        .data(answerReport.filter(item => item.attempt == 1 && !item.skipped && item.confused))
        .enter()
        .append('div')
        .attr('class', 'letter confused')
        .style('width', (d) => scale(d.duration) + 'em')
        .style('height', (d) => scale(d.duration) + 'em')
        .text(function (d) {
          return d.letter;
        });
      d3.select('#skippedAnswers')
        .html("<p class='report_category'>You skipped these letters</p>")
        .selectAll('div')
        .data(answerReport.filter(item => item.skipped))
        .enter()
        .append('div')
        .attr('class', 'letter skipped')
        .style('width', (d) => scale(d.duration) + 'em')
        .style('height', (d) => scale(d.duration) + 'em')
        .text(function (d) {
          return d.letter;
        });
      d3.select('#wrongAnswers')
        .html("<p class='report_category'>You wrongly identify these letters</p>")
        .selectAll('div')
        .data(answerReport.filter(item => item.attempt > 1 && !item.skipped))
        .enter()
        .append('div')
        .attr('class', 'letter wrong')
        .style('width', (d) => scale(d.duration) + 'em')
        .style('height', (d) => scale(d.duration) + 'em')
        .text(function (d) {
          return d.letter;
        });
    }


  </script>
</body>

</html>